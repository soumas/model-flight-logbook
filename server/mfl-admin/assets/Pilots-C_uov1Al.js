import{s as U,a as A,b as H,c as z,d as J}from"./index-D90MApZR.js";import{r as d,w as O,o as u,c as C,a as o,b as e,d as n,e as h,u as T,F as Z,f as v,h as w,g as j,i as q,t as r,j as P,k as G}from"./index-Daypqzai.js";import{s as K}from"./index-BitgGtuv.js";import{s as Q}from"./index-C_xna_1O.js";import{h as W}from"./ApiService-DJw7e3iz.js";import{P as X}from"./PilotService-C7HgUT-Q.js";import"./index-CGbkWGkK.js";import"./AuthService-CwJwlQPi.js";const Y={className:"card"},ee=o("h1",{style:{float:"left"}},"Pilot:innen",-1),te=o("div",{style:{clear:"both"}},null,-1),le={className:"card"},oe={key:0},ie=["innerHTML"],ne=o("br",null,null,-1),ae={class:"flex justify-between"},se={class:"flex justify-end"},re=o("i",{class:"pi pi-search"},null,-1),ce=o("br",null,null,-1),de={class:"flex items-center gap-4 py-1 px-2 justify-between"},ue={class:"text-color font-medium"},pe={class:"hidden sm:block"},me={class:"block sm:hidden"},xe={__name:"Pilots",setup(fe){const p=d([]),m=d(""),c=d({global:{}}),y=d(null);O(()=>v.path,b,{immediate:!0});function b(){p.value=[],X.get().then(l=>p.value=l).catch(l=>W(l,m))}function D(l){v.push(w.pilots+"/"+l.data.id)}function g(l){let i=new Date;return i.setHours(0,0,0,0),l==null||i>l?"danger":Math.abs((i-l)/(1e3*60*60*24))<=30?"warn":"secondary"}function F(){y.value.exportCSV()}function S(l){return l.data instanceof Date?l.data.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"}):l.data===!0?"Ja":l.data===!1?"Nein":l.data}return(l,i)=>{const s=j,V=Q,M=H,N=K,$=U,a=z,k=G,B=J,I=A;return u(),C(Z,null,[o("div",Y,[ee,e(s,{onClick:b,icon:"pi pi-refresh",severity:"secondary",style:{float:"right"}}),te]),o("div",le,[m.value.length>0?(u(),C("div",oe,[e(V,{severity:"error",closable:!0},{default:n(()=>[o("div",{innerHTML:m.value},null,8,ie)]),_:1}),ne])):h("",!0),o("div",ae,[e(s,{label:"Pilot:in hinzufügen",onClick:i[0]||(i[0]=()=>T(v).push(T(w).pilots+"/create")),icon:"pi pi-fw pi-user-plus",severity:"secondary"}),o("div",se,[e($,null,{default:n(()=>[e(M,null,{default:n(()=>[re]),_:1}),e(N,{modelValue:c.value.global.value,"onUpdate:modelValue":i[1]||(i[1]=t=>c.value.global.value=t),placeholder:"Volltextfilter"},null,8,["modelValue"])]),_:1}),e(s,{label:"Exportieren",onClick:F})])]),ce,e(I,{ref_key:"table",ref:y,value:p.value,sortField:"lastname",sortOrder:1,selectionMode:"multiple",onRowClick:i[2]||(i[2]=t=>D(t)),paginator:"",rows:20,filters:c.value,"onUpdate:filters":i[3]||(i[3]=t=>c.value=t),globalFilterFields:["email","lastname","firstname","id","phonenumber"],exportFunction:S,"export-filename":"MFL PilotInnen"},{empty:n(()=>[e(V,null,{default:n(()=>[q("Es wurde kein:e Pilot:in gefunden")]),_:1})]),paginatorcontainer:n(({first:t,last:f,page:_,pageCount:x,prevPageCallback:L,nextPageCallback:R,totalRecords:E})=>[o("div",de,[e(s,{icon:"pi pi-chevron-left",rounded:"",text:"",onClick:L,disabled:_===0},null,8,["onClick","disabled"]),o("div",ue,[o("span",pe,"Zeilen "+r(t)+"-"+r(f)+" von "+r(E),1),o("span",me,"Seite "+r(_+1)+" von "+r(x),1)]),e(s,{icon:"pi pi-chevron-right",rounded:"",text:"",onClick:R,disabled:_===x-1},null,8,["onClick","disabled"])])]),default:n(()=>[e(a,{field:"id",header:"ID",sortable:""}),e(a,{field:"lastname",header:"Nachname",sortable:""}),e(a,{field:"firstname",header:"Vorname",sortable:""}),e(a,{field:"phonenumber",header:"Telefon",sortable:""}),e(a,{field:"email",header:"E-Mail",sortable:""}),e(a,{field:"acRegistrationValidTo",header:"Registrierung",sortable:""},{body:n(({data:t})=>[t.acRegistrationValidTo!=null?(u(),P(k,{key:0,severity:g(t.acRegistrationValidTo),value:t.acRegistrationValidTo.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"})},null,8,["severity","value"])):h("",!0)]),_:1}),e(a,{field:"acPilotlicenseValidTo",header:"Führerschein",sortable:""},{body:n(({data:t})=>[t.acPilotlicenseValidTo!=null?(u(),P(k,{key:0,severity:g(t.acPilotlicenseValidTo),value:t.acPilotlicenseValidTo.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"})},null,8,["severity","value"])):h("",!0)]),_:1}),e(a,{field:"active",header:"Aktiv",sortable:""},{body:n(({data:t})=>[e(B,{modelValue:t.active,"onUpdate:modelValue":f=>t.active=f,binary:"",readonly:"readonly"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["value","filters"])])],64)}}};export{xe as default};
