import{s as U,a as H,b as z,c as J,d as O}from"./index-DZlxA0eb.js";import{r as m,w as Z,o as r,c as P,a as i,b as t,d as o,e as c,u as w,F as j,f as g,h as D,g as q,i as b,t as d,j as f,k as G}from"./index-C8DqRj8t.js";import{s as K}from"./index-Kqlsuw5R.js";import{s as Q}from"./index-5uaqEU-z.js";import{h as W}from"./ApiService-C9JKc7kW.js";import{P as X}from"./PilotService-C9advglE.js";import"./index-CEa6CIL1.js";import"./AuthService-C9kJo9V5.js";const Y={className:"card"},ee=i("h1",{style:{float:"left"}},"Pilot:innen",-1),te=i("div",{style:{clear:"both"}},null,-1),le={className:"card"},ie={key:0},oe=["innerHTML"],ne=i("br",null,null,-1),ae={class:"flex justify-between"},se={class:"flex justify-end"},re=i("i",{class:"pi pi-search"},null,-1),ce=i("br",null,null,-1),de={class:"flex items-center gap-4 py-1 px-2 justify-between"},ue={class:"text-color font-medium"},pe={class:"hidden sm:block"},me={class:"block sm:hidden"},xe={__name:"Pilots",setup(fe){const _=m([]),h=m(""),u=m({global:{}}),V=m(null);Z(()=>g.path,k,{immediate:!0});function k(){_.value=[],X.get().then(l=>_.value=l).catch(l=>W(l,h))}function F(l){g.push(D.pilots+"/"+l.data.id)}function x(l,n){let a=new Date;return a.setHours(0,0,0,0),n&&(l==null||a>l)?"danger":n&&Math.abs((a-l)/(1e3*60*60*24))<=30?"warn":"secondary"}function R(){V.value.exportCSV()}function S(l){return l.data instanceof Date?l.data.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"}):l.data===!0?"Ja":l.data===!1?"Nein":l.data}return(l,n)=>{const a=q,T=Q,M=z,N=K,$=U,s=J,p=G,A=O,B=H;return r(),P(j,null,[i("div",Y,[ee,t(a,{onClick:k,icon:"pi pi-refresh",severity:"secondary",style:{float:"right"}}),te]),i("div",le,[h.value.length>0?(r(),P("div",ie,[t(T,{severity:"error",closable:!0},{default:o(()=>[i("div",{innerHTML:h.value},null,8,oe)]),_:1}),ne])):c("",!0),i("div",ae,[t(a,{label:"Pilot:in hinzufügen",onClick:n[0]||(n[0]=()=>w(g).push(w(D).pilots+"/create")),icon:"pi pi-fw pi-user-plus"}),i("div",se,[t($,null,{default:o(()=>[t(M,null,{default:o(()=>[re]),_:1}),t(N,{modelValue:u.value.global.value,"onUpdate:modelValue":n[1]||(n[1]=e=>u.value.global.value=e),placeholder:"Volltextfilter"},null,8,["modelValue"])]),_:1}),t(a,{label:"Exportieren",onClick:R,severity:"secondary"})])]),ce,t(B,{ref_key:"table",ref:V,value:_.value,sortField:"lastname",sortOrder:1,selectionMode:"multiple",onRowClick:n[2]||(n[2]=e=>F(e)),paginator:"",rows:20,filters:u.value,"onUpdate:filters":n[3]||(n[3]=e=>u.value=e),globalFilterFields:["email","lastname","firstname","id","phonenumber"],exportFunction:S,"export-filename":"MFL PilotInnen"},{empty:o(()=>[t(T,null,{default:o(()=>[b("Es wurde kein:e Pilot:in gefunden")]),_:1})]),paginatorcontainer:o(({first:e,last:v,page:y,pageCount:C,prevPageCallback:I,nextPageCallback:L,totalRecords:E})=>[i("div",de,[t(a,{icon:"pi pi-chevron-left",rounded:"",text:"",onClick:I,disabled:y===0},null,8,["onClick","disabled"]),i("div",ue,[i("span",pe,"Zeilen "+d(e)+"-"+d(v)+" von "+d(E),1),i("span",me,"Seite "+d(y+1)+" von "+d(C),1)]),t(a,{icon:"pi pi-chevron-right",rounded:"",text:"",onClick:L,disabled:y===C-1},null,8,["onClick","disabled"])])]),default:o(()=>[t(s,{field:"id",header:"ID",sortable:""}),t(s,{field:"lastname",header:"Nachname",sortable:""}),t(s,{field:"firstname",header:"Vorname",sortable:""}),t(s,{field:"phonenumber",header:"Telefon",sortable:""}),t(s,{field:"email",header:"E-Mail",sortable:""}),t(s,{field:"acRegistrationValidTo",header:"Registrierung",sortable:""},{body:o(({data:e})=>[e.acRegistrationValidTo!=null?(r(),f(p,{key:0,severity:x(e.acRegistrationValidTo,e.validateAcRegistration),value:e.acRegistrationValidTo.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"})},null,8,["severity","value"])):c("",!0),e.acRegistrationValidTo==null&&e.validateAcRegistration?(r(),f(p,{key:1,severity:"danger"},{default:o(()=>[b("Datum fehlt")]),_:1})):c("",!0)]),_:1}),t(s,{field:"acPilotlicenseValidTo",header:"Führerschein",sortable:""},{body:o(({data:e})=>[e.acPilotlicenseValidTo!=null?(r(),f(p,{key:0,severity:x(e.acPilotlicenseValidTo,e.validateAcPilotlicense),value:e.acPilotlicenseValidTo.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"})},null,8,["severity","value"])):c("",!0),e.acPilotlicenseValidTo==null&&e.validateAcPilotlicense?(r(),f(p,{key:1,severity:"danger"},{default:o(()=>[b("Datum fehlt")]),_:1})):c("",!0)]),_:1}),t(s,{field:"active",header:"Aktiv",sortable:""},{body:o(({data:e})=>[t(A,{modelValue:e.active,"onUpdate:modelValue":v=>e.active=v,binary:"",readonly:"readonly"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["value","filters"])])],64)}}};export{xe as default};
