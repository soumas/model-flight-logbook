import{s as H,a as z,b as J}from"./index-Z1mY45GO.js";import{r as d,w as O,o as r,c as b,a as i,b as t,d as o,e as c,u as P,F as Z,f as k,g as F,h as j,i as u,j as V,t as p,k as q}from"./index-lWlk8XG8.js";import{a as G,b as K}from"./index-CWOciPov.js";import{s as Q,a as W}from"./index-aqDJwCED.js";import{h as X}from"./ApiService-S8GRmx5O.js";import{P as Y}from"./PilotService-DXhGv0WC.js";import"./index-BJLd3FNP.js";import"./AuthService-TS0M5ZGt.js";const ee={className:"card"},te=i("h1",{style:{float:"left"}},"Pilot:innen",-1),le=i("div",{style:{clear:"both"}},null,-1),ie={className:"card"},oe={key:0},ne=["innerHTML"],ae=i("br",null,null,-1),se={class:"flex justify-between"},re={class:"flex justify-end"},ce=i("i",{class:"pi pi-search"},null,-1),de=i("br",null,null,-1),ue={key:0},pe={class:"flex items-center gap-4 py-1 px-2 justify-between"},fe={class:"text-color font-medium"},me={class:"hidden sm:block"},_e={class:"block sm:hidden"},we={__name:"Pilots",setup(he){const h=d([]),v=d(""),f=d({global:{}}),x=d(null),m=d(!1);O(()=>k.path,T,{immediate:!0});function T(){h.value=[],m.value=!0,Y.get().then(l=>h.value=l).catch(l=>X(l,v)).finally(()=>{m.value=!1})}function R(l){k.push(F.pilots+"/"+l.data.id)}function w(l,n){let a=new Date;return a.setHours(0,0,0,0),n&&(l==null||a>l)?"danger":n&&Math.abs((a-l)/(1e3*60*60*24))<=30?"warn":"secondary"}function S(){x.value.exportCSV()}function M(l){return l.data instanceof Date?l.data.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"}):l.data===!0?"Ja":l.data===!1?"Nein":l.data}return(l,n)=>{const a=j,C=Q,N=K,$=W,A=G,s=z,_=q,B=J,I=H;return r(),b(Z,null,[i("div",ee,[te,t(a,{onClick:T,icon:"pi pi-refresh",severity:"secondary",style:{float:"right"}}),le]),i("div",ie,[v.value.length>0?(r(),b("div",oe,[t(C,{severity:"error",closable:!0},{default:o(()=>[i("div",{innerHTML:v.value},null,8,ne)]),_:1}),ae])):c("",!0),i("div",se,[t(a,{label:"Pilot:in hinzufügen",onClick:n[0]||(n[0]=()=>P(k).push(P(F).pilots+"/create")),icon:"pi pi-fw pi-user-plus"}),i("div",re,[t(A,null,{default:o(()=>[t(N,null,{default:o(()=>[ce]),_:1}),t($,{modelValue:f.value.global.value,"onUpdate:modelValue":n[1]||(n[1]=e=>f.value.global.value=e),placeholder:"Volltextfilter"},null,8,["modelValue"])]),_:1}),t(a,{label:"Exportieren",onClick:S,severity:"secondary"})])]),de,t(I,{ref_key:"table",ref:x,value:h.value,sortField:"lastname",sortOrder:1,selectionMode:"multiple",onRowClick:n[2]||(n[2]=e=>R(e)),paginator:"",rows:9999,filters:f.value,"onUpdate:filters":n[3]||(n[3]=e=>f.value=e),globalFilterFields:["email","lastname","firstname","id","phonenumber"],exportFunction:M,"export-filename":"MFL PilotInnen"},{empty:o(()=>[m.value?(r(),b("div",ue,"Daten werden geladen ...")):c("",!0),m.value?c("",!0):(r(),u(C,{key:1},{default:o(()=>[V("Es wurden keine Daten gefunden, welche den Filterkriterien entsprechen")]),_:1}))]),paginatorcontainer:o(({first:e,last:y,page:g,pageCount:D,prevPageCallback:L,nextPageCallback:E,totalRecords:U})=>[i("div",pe,[t(a,{icon:"pi pi-chevron-left",rounded:"",text:"",onClick:L,disabled:g===0},null,8,["onClick","disabled"]),i("div",fe,[i("span",me,"Zeilen "+p(e)+"-"+p(y)+" von "+p(U),1),i("span",_e,"Seite "+p(g+1)+" von "+p(D),1)]),t(a,{icon:"pi pi-chevron-right",rounded:"",text:"",onClick:E,disabled:g===D-1},null,8,["onClick","disabled"])])]),default:o(()=>[t(s,{field:"id",header:"ID",sortable:""}),t(s,{field:"lastname",header:"Nachname",sortable:""}),t(s,{field:"firstname",header:"Vorname",sortable:""}),t(s,{field:"phonenumber",header:"Telefon",sortable:""}),t(s,{field:"email",header:"E-Mail",sortable:""}),t(s,{field:"acRegistrationValidTo",header:"Registrierung",sortable:""},{body:o(({data:e})=>[e.acRegistrationValidTo!=null?(r(),u(_,{key:0,severity:w(e.acRegistrationValidTo,e.validateAcRegistration),value:e.acRegistrationValidTo.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"})},null,8,["severity","value"])):c("",!0),e.acRegistrationValidTo==null&&e.validateAcRegistration?(r(),u(_,{key:1,severity:"danger"},{default:o(()=>[V("Datum fehlt")]),_:1})):c("",!0)]),_:1}),t(s,{field:"acPilotlicenseValidTo",header:"Führerschein",sortable:""},{body:o(({data:e})=>[e.acPilotlicenseValidTo!=null?(r(),u(_,{key:0,severity:w(e.acPilotlicenseValidTo,e.validateAcPilotlicense),value:e.acPilotlicenseValidTo.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"})},null,8,["severity","value"])):c("",!0),e.acPilotlicenseValidTo==null&&e.validateAcPilotlicense?(r(),u(_,{key:1,severity:"danger"},{default:o(()=>[V("Datum fehlt")]),_:1})):c("",!0)]),_:1}),t(s,{field:"active",header:"Aktiv",sortable:""},{body:o(({data:e})=>[t(B,{modelValue:e.active,"onUpdate:modelValue":y=>e.active=y,binary:"",readonly:"readonly"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["value","filters"])])],64)}}};export{we as default};
