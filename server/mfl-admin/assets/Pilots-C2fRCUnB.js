import{s as E,a as L,b as U,c as j,d as A}from"./index-qaD690pH.js";import{r as f,w as H,o as d,c as T,a as l,b as t,d as i,e as h,u as w,F as z,f as v,h as x,g as O,i as C,t as a,j as P,k as Z}from"./index-BS5zzg4S.js";import{s as q}from"./index-fqxd1ZVi.js";import{s as G}from"./index-BUyaMX_4.js";import{h as J}from"./ApiService-91fyH-iC.js";import{P as K}from"./PilotService-Bv_ve3BY.js";import"./index-DtDI6MZu.js";import"./AuthService-g_HBzLPV.js";const Q={className:"card"},W=l("h1",{style:{float:"left"}},"Pilot:innen",-1),X=l("div",{style:{clear:"both"}},null,-1),Y={className:"card"},ee={key:0},te=["innerHTML"],le=l("br",null,null,-1),oe={class:"flex justify-between"},ie=l("i",{class:"pi pi-search"},null,-1),ne=l("br",null,null,-1),se={class:"flex items-center gap-4 py-1 px-2 justify-between"},ae={class:"text-color font-medium"},re={class:"hidden sm:block"},ce={class:"block sm:hidden"},ye={__name:"Pilots",setup(de){const u=f([]),p=f(""),r=f({global:{}});H(()=>v.path,b,{immediate:!0});function b(){u.value=[],K.get().then(n=>u.value=n).catch(n=>J(n,p))}function D(n){v.push(x.pilots+"/"+n.data.id)}function y(n){let o=new Date;return o.setHours(0,0,0,0),n==null||o>n?"danger":Math.abs((o-n)/(1e3*60*60*24))<=30?"warn":"secondary"}return(n,o)=>{const c=O,g=G,$=U,F=q,M=E,s=j,k=Z,N=A,B=L;return d(),T(z,null,[l("div",Q,[W,t(c,{onClick:b,icon:"pi pi-refresh",severity:"secondary",style:{float:"right"}}),X]),l("div",Y,[p.value.length>0?(d(),T("div",ee,[t(g,{severity:"error",closable:!0},{default:i(()=>[l("div",{innerHTML:p.value},null,8,te)]),_:1}),le])):h("",!0),l("div",oe,[t(c,{label:"Pilot:in hinzufügen",onClick:o[0]||(o[0]=()=>w(v).push(w(x).pilots+"/create")),icon:"pi pi-fw pi-user-plus",severity:"secondary"}),t(M,null,{default:i(()=>[t($,null,{default:i(()=>[ie]),_:1}),t(F,{modelValue:r.value.global.value,"onUpdate:modelValue":o[1]||(o[1]=e=>r.value.global.value=e),placeholder:"Volltextfilter"},null,8,["modelValue"])]),_:1})]),ne,t(B,{value:u.value,sortField:"lastname",sortOrder:1,selectionMode:"multiple",onRowClick:o[2]||(o[2]=e=>D(e)),paginator:"",rows:20,filters:r.value,"onUpdate:filters":o[3]||(o[3]=e=>r.value=e),globalFilterFields:["email","lastname","firstname","id"]},{empty:i(()=>[t(g,null,{default:i(()=>[C("Es wurde kein:e Pilot:in gefunden")]),_:1})]),paginatorcontainer:i(({first:e,last:m,page:_,pageCount:V,prevPageCallback:R,nextPageCallback:S,totalRecords:I})=>[l("div",se,[t(c,{icon:"pi pi-chevron-left",rounded:"",text:"",onClick:R,disabled:_===0},null,8,["onClick","disabled"]),l("div",ae,[l("span",re,"Zeilen "+a(e)+"-"+a(m)+" von "+a(I),1),l("span",ce,"Seite "+a(_+1)+" von "+a(V),1)]),t(c,{icon:"pi pi-chevron-right",rounded:"",text:"",onClick:S,disabled:_===V-1},null,8,["onClick","disabled"])])]),default:i(()=>[t(s,{field:"lastname",header:"Name",sortable:""},{body:i(({data:e})=>[C(a(e.lastname)+" "+a(e.firstname),1)]),_:1}),t(s,{field:"id",header:"ID",sortable:""}),t(s,{field:"phonenumber",header:"Telefon",sortable:""}),t(s,{field:"email",header:"E-Mail",sortable:""}),t(s,{field:"acRegistrationValidTo",header:"Registrierung",sortable:""},{body:i(({data:e})=>[e.acRegistrationValidTo!=null?(d(),P(k,{key:0,severity:y(e.acRegistrationValidTo),value:e.acRegistrationValidTo.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"})},null,8,["severity","value"])):h("",!0)]),_:1}),t(s,{field:"acPilotlicenseValidTo",header:"Führerschein",sortable:""},{body:i(({data:e})=>[e.acPilotlicenseValidTo!=null?(d(),P(k,{key:0,severity:y(e.acPilotlicenseValidTo),value:e.acPilotlicenseValidTo.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"})},null,8,["severity","value"])):h("",!0)]),_:1}),t(s,{field:"active",header:"Aktiv",sortable:""},{body:i(({data:e})=>[t(N,{modelValue:e.active,"onUpdate:modelValue":m=>e.active=m,binary:"",readonly:"readonly"},null,8,["modelValue","onUpdate:modelValue"])]),_:1})]),_:1},8,["value","filters"])])],64)}}};export{ye as default};
