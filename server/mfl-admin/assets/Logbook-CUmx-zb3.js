import{e as A,s as H,a as Z,b as z,c as J,d as P}from"./index-Dh5oe2fh.js";import{s as R}from"./index-U1eiLLb9.js";import{s as q}from"./index-CkCayRM_.js";import{r as d,w as G,o as v,c as y,a as o,b as e,d as n,e as V,F as K,i as C,t as r,f as Q,g as W}from"./index-BcElYNg0.js";import{h as X}from"./ApiService-Y769u1gu.js";import{L as j}from"./LogbookService-DnB3u58k.js";import"./index-YckMiLhg.js";import"./AuthService-C30cchEu.js";const ee={className:"card"},te=o("h1",{style:{float:"left"}},"Flugbuch",-1),le=o("div",{style:{clear:"both"}},null,-1),oe={className:"card"},ae={key:0},ne=["innerHTML"],ie=o("br",null,null,-1),re={class:"flex justify-end"},se=o("i",{class:"pi pi-search"},null,-1),de=o("br",null,null,-1),ue={class:"flex items-center gap-4 py-1 px-2 justify-between"},ce={class:"text-color font-medium"},me={class:"hidden sm:block"},pe={class:"block sm:hidden"},fe={key:0},Ce={__name:"Logbook",setup(_e){const f=d([]),_=d(""),s=d({global:{}}),x=d(null),m=d(new Date().getFullYear()),D=d(Array.from({length:new Date().getFullYear()-2024+1},(l,a)=>new Date().getFullYear()-a)),p=d("MFL Flugbuch");G(()=>Q.path,h,{immediate:!0});function h(){f.value=[],k(),j.get(m.value).then(l=>{l.forEach(a=>{a.startDate=a.start}),f.value=l}).catch(l=>X(l,_))}function k(){p.value=`MFL Flugbuch ${m.value}`,s.value.global.value!=null&&s.value.global.value.length>0&&(p.value=`${p.value} ${s.value.global.value}`)}function L(){x.value.exportCSV()}function he(){}function w(l){return l.field==="startDate"&&l.data instanceof Date?l.data.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"}):(l.field==="start"||l.field==="end")&&l.data instanceof Date?l.data.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}):l.data===!0?"Ja":l.data===!1?"Nein":l.data}return(l,a)=>{const u=W,F=q,S=A,$=z,M=R,T=H,i=J,B=P,N=Z;return v(),y(K,null,[o("div",ee,[te,e(u,{onClick:h,icon:"pi pi-refresh",severity:"secondary",style:{float:"right"}}),le]),o("div",oe,[_.value.length>0?(v(),y("div",ae,[e(F,{severity:"error",closable:!0},{default:n(()=>[o("div",{innerHTML:_.value},null,8,ne)]),_:1}),ie])):V("",!0),o("div",re,[e(S,{modelValue:m.value,"onUpdate:modelValue":a[0]||(a[0]=t=>m.value=t),options:D.value,onChange:h},null,8,["modelValue","options"]),e(T,null,{default:n(()=>[e($,null,{default:n(()=>[se]),_:1}),e(M,{modelValue:s.value.global.value,"onUpdate:modelValue":a[1]||(a[1]=t=>s.value.global.value=t),placeholder:"Volltextfilter",onInput:k},null,8,["modelValue"])]),_:1}),e(u,{label:"Exportieren",onClick:L})]),de,e(N,{ref_key:"table",ref:x,value:f.value,tableStyle:"min-width: 50rem",sortField:"start",sortOrder:-1,selectionMode:"multiple",onRowClick:a[2]||(a[2]=t=>void 0),paginator:"",rows:20,filters:s.value,"onUpdate:filters":a[3]||(a[3]=t=>s.value=t),globalFilterFields:["airport","pilotname","comment","start"],exportFunction:w,"export-filename":p.value},{empty:n(()=>[e(F,null,{default:n(()=>[C("Für den ausgewählten Zeitraum wurde kein Logbucheintrag gefunden")]),_:1})]),paginatorcontainer:n(({first:t,last:g,page:c,pageCount:b,prevPageCallback:E,nextPageCallback:I,totalRecords:O,firstPageCallback:U,lastPageCallback:Y})=>[o("div",ue,[e(u,{icon:"pi pi-angle-double-left",rounded:"",text:"",onClick:U,disabled:c===0},null,8,["onClick","disabled"]),e(u,{icon:"pi pi-angle-left",rounded:"",text:"",onClick:E,disabled:c===0},null,8,["onClick","disabled"]),o("div",ce,[o("span",me,"Zeilen "+r(t)+"-"+r(g)+" von "+r(O),1),o("span",pe,"Seite "+r(c+1)+" von "+r(b),1)]),e(u,{icon:"pi pi-angle-right",rounded:"",text:"",onClick:I,disabled:c===b-1},null,8,["onClick","disabled"]),e(u,{icon:"pi pi-angle-double-right",rounded:"",text:"",onClick:Y,disabled:c===b-1},null,8,["onClick","disabled"])])]),default:n(()=>[e(i,{field:"startDate",header:"Datum",sortable:""},{body:n(({data:t})=>[o("span",null,r(t.startDate.toLocaleDateString([],{day:"2-digit",month:"2-digit",year:"numeric"})),1)]),_:1}),e(i,{field:"airport",header:"Flugplatz",sortable:""}),e(i,{field:"pilotname",header:"Pilot",sortable:""}),e(i,{field:"start",header:"Beginn",sortable:""},{body:n(({data:t})=>[C(r(t.start.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)]),_:1}),e(i,{field:"end",header:"Ende",sortable:""},{body:n(({data:t})=>[t.end?(v(),y("span",fe,r(t.end.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})),1)):V("",!0)]),_:1}),e(i,{field:"takeoffcount",header:"Flüge",sortable:""}),e(i,{field:"maxAltitude",header:"Max. Flughöhe",sortable:""}),e(i,{field:"airspaceObserver",header:"Luftraum-Beobachter",sortable:""},{body:n(({data:t})=>[e(B,{modelValue:t.airspaceObserver,"onUpdate:modelValue":g=>t.airspaceObserver=g,binary:"",readonly:"readonly"},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(i,{field:"comment",header:"Besonderheiten, Vorkommnisse",sortable:""})]),_:1},8,["value","filters","export-filename"])])],64)}}};export{Ce as default};
